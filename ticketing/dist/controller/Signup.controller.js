sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/m/Popover","sap/m/Button","sap/m/VBox","sap/m/Input","sap/m/Label"],function(e,t,o,s,r,a,i,n){"use strict";return e.extend("com.wipro.ticketing.controller.Signup",{onInit:function(){var e={loginTypes:[{key:"customer",text:"Customer Login"},{key:"technician",text:"Technician Login"}]};var t=new o(e);this.getView().setModel(t)},onPress:function(){console.log("preswsed");var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("RouteCservice")},onLoginPress:function(){var e=this.byId("userTypeSelect").getSelectedItem().getKey();var t=this.byId("usernameInput").getValue();var o=this.byId("passwordInput").getValue();if(e==="technician"){this.getOwnerComponent().getRouter().navTo("RouteTresolution")}else if(e==="customer"){this.getOwnerComponent().getRouter().navTo("RouteCservice")}},onSignUp:function(){var e=this.byId("idInput"),o=this.byId("nameInput"),s=this.byId("passwordInput");var r=(new Date).getTime();var a=Math.floor(Math.random()*9e3)+1e3;var i="SR-"+r+"-"+a;this.getView().getModel("localmodel").setProperty("/ServiceRequestId",i);console.log("service id is :",this.getView().getModel("localmodel").getProperty("/ServiceRequestId"));var n={customerID:e.getValue(),customerName:o.getValue(),password:s.getValue()};var u=this;this.getView().getModel("localmodel").setProperty("/CustomerId",e.getValue());console.log("cust id is ",this.getView().getModel("localmodel").getProperty("/CustomerId"));this.getView().getModel("odatamodel").read("/customer",{success:function(e){var o=e.results.length;for(let t=0;t<o;t++){if(e.results[t].customerID==n.customerID){var s=1;break}else if(e.results[t].customerName==n.customerName){var s=2;break}else if(e.results[t].password==n.password){var s=3;break}}if(!n.customerID&&!n.customerName&&!n.password){t.error("Required fields cannot be empty")}else if(s==1){t.error("userID alreaady exists")}else if(s==2){t.error("userName already exists")}else{u.getView().getModel("odatamodel").create("/customer",n,{success:function(e){console.log(e);t.success("User successfully created");u.getView().getModel("localmodel").setProperty("/custId",n.customerID);var o=u.getOwnerComponent().getRouter();o.navTo("RouteCservice")},error:function(e){t.error("Error occurred while signing up,please fill the data again")}})}}})}})});
//# sourceMappingURL=Signup.controller.js.map