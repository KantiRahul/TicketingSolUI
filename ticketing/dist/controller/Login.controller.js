sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/m/Popover","sap/m/Button","sap/m/VBox","sap/m/Input","sap/m/Label"],function(e,t,s,o,r,n,a,i){"use strict";return e.extend("com.wipro.ticketing.controller.Login",{onInit:function(){var e={loginTypes:[{key:"customer",text:"Customer Login"},{key:"technician",text:"Technician Login"}]};var t=new s(e);this.getView().setModel(t)},onPress:function(){console.log("preswsed");var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("RouteCservice")},onLoginPress:function(){var e=this.byId("userTypeSelect").getSelectedItem().getKey();var t=this.byId("usernameInput").getValue();var s=this.byId("passwordInput").getValue();var o=0;var r={userName:t,password:s};var n=this;var a=(new Date).getTime();var i=Math.floor(Math.random()*9e3)+1e3;var l="SR-"+a+"-"+i;this.getView().getModel("localmodel").setProperty("/ServiceRequestId",l);console.log("service id is :",this.getView().getModel("localmodel").getProperty("/ServiceRequestId"));if(e==="technician"){n.getOwnerComponent().getRouter().navTo("RouteTresolution")}else if(e==="customer"){n.getOwnerComponent().getRouter().navTo("RouteCservice")}this.getView().getModel("localmodel").setProperty("/CustomerId",t);console.log("cust id is ",this.getView().getModel("localmodel").getProperty("/CustomerId"))},onLoginPress1:function(){var e=this.byId("userTypeSelect").getSelectedItem().getKey();var s=this.byId("usernameInput").getValue();var o=this.byId("passwordInput").getValue();var r=0;var n=(new Date).getTime();var a=Math.floor(Math.random()*9e3)+1e3;var i="SR-"+n+"-"+a;this.getView().getModel("localmodel").setProperty("/ServiceRequestId",i);console.log("service id is :",this.getView().getModel("localmodel").getProperty("/ServiceRequestId"));this.getView().getModel("localmodel").setProperty("/CustomerId",s);console.log("cust id is ",this.getView().getModel("localmodel").getProperty("/CustomerId"));if(!s&&!o){t.error("Please enter required fields")}else if(!s){t.error("Please enter  ID.")}else if(!o){t.error("Please enter  password.")}else{var l=this;var u=this.getView().getModel("localmodel");if(e==="technician"){this.getView().getModel("odatamodel").read("/technician",{success:function(e){console.log(e);var n=e.results.length;for(let t=0;t<n;t++){if(e.results[t].technicianID==s&&e.results[t].password==o){var a=1;r=t;break}}if(a==1){t.success("Tech Login Successful");u.setProperty("/techuserrname",s);u.setProperty("/techpasssword",o);u.setProperty("/techuserId",e.results[r].technicianID);l.getView().byId("usernameInput").setValue("");l.getView().byId("passwordInput").setValue("")}else{t.error("Username or password is wrong");l.getView().byId("usernameInput").setValue("");l.getView().byId("passwordInput").setValue("")}}});l.getOwnerComponent().getRouter().navTo("RouteTresolution")}else if(e==="customer"){l.getOwnerComponent().getRouter().navTo("RouteCservice");this.getView().getModel("odatamodel").read("/customer",{success:function(e){console.log(e);var n=e.results.length;for(let t=0;t<n;t++){if(e.results[t].customerID==s&&e.results[t].password==o){var a=1;r=t;break}}if(a==1){t.success("Login Successful");u.setProperty("/userrname",s);u.setProperty("/passsword",o);u.setProperty("/custId",e.results[r].userId);console.log("setting custid ",u.getProperty("/custId"));var i=resultesult.results[r].userId;localStorage.setItem("userrname",i);l.getView().byId("usernameInput").setValue("");l.getView().byId("passwordInput").setValue("")}else{t.error("Username or password is wrong");l.getView().byId("usernameInput").setValue("");l.getView().byId("passwordInput").setValue("")}}})}}},onUserTypeChange:function(e){var t=e.getSource().getSelectedItem().getKey();var s=this.getView().byId("signupButton");s.setEnabled(t==="customer")},onSignUp:function(){console.log("preswsed");var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Signup")},onSignUpPress:function(){var e=this.getView();var t=new o({title:"Sign Up",contentWidth:"300px",content:[new a({placeholder:"Customer ID"}),new a({placeholder:"Customer Name"}),new a({placeholder:"Password",type:"Password"}),new r({text:"Sign Up",press:function(){var e={customerId:t.getContent()[0].getValue(),customerName:t.getContent()[1].getValue(),password:t.getContent()[2].getValue()};console.log(e);MessageToast.show("Successfully signed up");t.close()}})]});t.openBy(e.byId("signupButton"))}})});
//# sourceMappingURL=Login.controller.js.map